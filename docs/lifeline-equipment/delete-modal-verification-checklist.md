# ライフライン設備削除モーダル修正 - 検証チェックリスト

## 修正内容の概要
削除ボタンを押した際に確認モーダルが背面に隠れる問題を修正しました。

## 検証手順

### 1. 電気設備ドキュメント
- [ ] 施設詳細ページを開く
- [ ] 「電気設備」タブを開く
- [ ] 「ドキュメント管理」ボタンをクリック
- [ ] ファイルまたはフォルダを右クリック
- [ ] 「削除」を選択
- [ ] **確認**: 削除確認モーダルが最前面に表示される
- [ ] **確認**: モーダルのボタン（削除、キャンセル）がクリック可能
- [ ] **確認**: モーダルの背景（バックドロップ）が適切に表示される

### 2. ガス設備ドキュメント
- [ ] 「ガス設備」タブを開く
- [ ] 「ドキュメント管理」ボタンをクリック
- [ ] ファイルまたはフォルダを右クリック
- [ ] 「削除」を選択
- [ ] **確認**: 削除確認モーダルが最前面に表示される
- [ ] **確認**: モーダルが操作可能

### 3. 水道設備ドキュメント
- [ ] 「水道設備」タブを開く
- [ ] 「ドキュメント管理」ボタンをクリック
- [ ] ファイルまたはフォルダを右クリック
- [ ] 「削除」を選択
- [ ] **確認**: 削除確認モーダルが最前面に表示される
- [ ] **確認**: モーダルが操作可能

### 4. エレベーター設備ドキュメント
- [ ] 「エレベーター設備」タブを開く
- [ ] 「ドキュメント管理」ボタンをクリック
- [ ] ファイルまたはフォルダを右クリック
- [ ] 「削除」を選択
- [ ] **確認**: 削除確認モーダルが最前面に表示される
- [ ] **確認**: モーダルが操作可能

### 5. 空調・照明設備ドキュメント
- [ ] 「空調・照明設備」タブを開く
- [ ] 「ドキュメント管理」ボタンをクリック
- [ ] ファイルまたはフォルダを右クリック
- [ ] 「削除」を選択
- [ ] **確認**: 削除確認モーダルが最前面に表示される
- [ ] **確認**: モーダルが操作可能

## 機能テスト

### 削除確認モーダルの動作
- [ ] 「削除」ボタンをクリックすると赤色のゴミ箱アイコンが表示される
- [ ] 確認メッセージが正しく表示される
- [ ] 「削除」ボタンが赤色で表示される
- [ ] 「キャンセル」ボタンが灰色で表示される
- [ ] 「×」ボタンでモーダルを閉じられる
- [ ] ESCキーでモーダルを閉じられる

### 削除実行
- [ ] 「削除」ボタンをクリックするとファイル/フォルダが削除される
- [ ] 削除後、ドキュメント一覧が自動更新される
- [ ] 成功メッセージが表示される

### キャンセル
- [ ] 「キャンセル」ボタンをクリックするとモーダルが閉じる
- [ ] ファイル/フォルダは削除されない
- [ ] ドキュメント一覧は変更されない

## ブラウザ互換性テスト

### デスクトップブラウザ
- [ ] Chrome (最新版)
- [ ] Firefox (最新版)
- [ ] Safari (最新版)
- [ ] Edge (最新版)

### モバイルブラウザ
- [ ] iOS Safari
- [ ] Android Chrome

## アクセシビリティテスト

- [ ] キーボードナビゲーション: Tabキーでボタン間を移動可能
- [ ] キーボード操作: Enterキーで選択、ESCキーで閉じる
- [ ] スクリーンリーダー: モーダルのタイトルと内容が読み上げられる
- [ ] フォーカス管理: モーダルを開くとOKボタンにフォーカスが移動

## パフォーマンステスト

- [ ] モーダルの表示速度: 即座に表示される
- [ ] z-index調整の遅延: 視覚的な遅延がない
- [ ] メモリリーク: モーダルを複数回開閉してもメモリ使用量が増加しない

## エッジケーステスト

### 複数モーダル
- [ ] フォルダ作成モーダルを開いた状態で削除確認モーダルを開く
- [ ] **確認**: 削除確認モーダルが最前面に表示される

### 高速操作
- [ ] 削除ボタンを連続でクリック
- [ ] **確認**: 重複したモーダルが表示されない
- [ ] **確認**: 1つのモーダルのみが表示される

### ネットワークエラー
- [ ] ネットワークを切断した状態で削除を実行
- [ ] **確認**: 適切なエラーメッセージが表示される

## コンソールログ確認

ブラウザの開発者ツールコンソールで以下を確認：

- [ ] `[LifelineDoc] Adjusted confirm dialog z-index to 2050` が表示される
- [ ] エラーメッセージが表示されない
- [ ] 警告メッセージが表示されない（期待される警告を除く）

## テストファイルでの検証

`test-lifeline-delete-modal.html`を使用：

- [ ] ファイルをブラウザで開く
- [ ] 「削除」ボタンをクリック
- [ ] **確認**: モーダルが最前面に表示される
- [ ] **確認**: z-index: 2050 がコンソールに表示される
- [ ] 両方の折りたたみセクションでテスト

## 既存機能への影響確認

### 他のモーダル機能
- [ ] フォルダ作成モーダルが正常に動作する
- [ ] ファイルアップロードモーダルが正常に動作する
- [ ] 名前変更モーダルが正常に動作する
- [ ] プロパティモーダルが正常に動作する

### ドキュメント管理機能
- [ ] ファイル一覧表示が正常に動作する
- [ ] フォルダナビゲーションが正常に動作する
- [ ] 検索機能が正常に動作する
- [ ] ファイルダウンロードが正常に動作する

## 問題が発生した場合

### モーダルが背面に隠れる
1. ブラウザのキャッシュをクリア
2. ページをリロード
3. コンソールでz-indexの値を確認
4. CSSが正しく読み込まれているか確認

### モーダルが表示されない
1. JavaScriptエラーがないか確認
2. `AppUtils.confirmDialog`が定義されているか確認
3. Bootstrapが正しく読み込まれているか確認

### ボタンがクリックできない
1. z-indexの値を確認（2050であるべき）
2. バックドロップのz-indexを確認（2040であるべき）
3. 他の要素がモーダルを覆っていないか確認

## 検証完了の条件

以下のすべてが満たされた場合、検証完了とする：

- [ ] すべてのライフライン設備カテゴリで削除モーダルが正常に表示される
- [ ] モーダルが最前面に表示され、操作可能である
- [ ] 既存機能に影響がない
- [ ] コンソールにエラーが表示されない
- [ ] アクセシビリティ要件を満たしている
- [ ] 主要ブラウザで動作する

## 報告

検証結果を以下の形式で報告：

```
検証日: YYYY-MM-DD
検証者: [名前]
ブラウザ: [ブラウザ名とバージョン]

結果:
- 電気設備: ✅ / ❌
- ガス設備: ✅ / ❌
- 水道設備: ✅ / ❌
- エレベーター設備: ✅ / ❌
- 空調・照明設備: ✅ / ❌

問題点:
[問題があれば記載]

備考:
[その他の気づき]
```
