# 契約書ドキュメント統合 - テストクイックリファレンス

## 概要

このドキュメントは、契約書ドキュメント統合の手動テストを迅速に実施するためのクイックリファレンスです。
詳細なテストガイドは [contract-document-compatibility-testing-guide.md](contract-document-compatibility-testing-guide.md) を参照してください。

## クイックチェックリスト

### ✅ 表示確認（5分）

1. **統一セクションの表示**
   - [ ] 契約書タブを開く
   - [ ] 「契約書関連ドキュメント」セクションが表示される
   - [ ] 「ドキュメントを表示」ボタンが表示される

2. **セクションの展開**
   - [ ] ボタンをクリックしてセクションを展開
   - [ ] セクションがスムーズに展開される
   - [ ] ボタンテキストが「ドキュメントを非表示」に変わる

3. **フォルダとファイルの表示**
   - [ ] デフォルトフォルダ（契約書、見積書、請求書、その他）が表示される
   - [ ] 既存フォルダが表示される
   - [ ] 既存ファイルが表示される
   - [ ] フォルダ階層が正しい

### ✅ 操作確認（10分）

4. **ファイルダウンロード**
   - [ ] ファイルをクリックしてダウンロード
   - [ ] ファイルが正常にダウンロードされる
   - [ ] ファイル内容が正しい

5. **フォルダ操作**
   - [ ] フォルダをクリックして開く
   - [ ] フォルダ内のコンテンツが表示される
   - [ ] パンくずナビゲーションが更新される
   - [ ] 「戻る」ボタンで親フォルダに戻る

6. **削除操作（編集者権限のみ）**
   - [ ] ファイル削除ボタンをクリック
   - [ ] 確認ダイアログが表示される
   - [ ] 削除が成功する
   - [ ] フォルダ削除も同様に動作する

### ✅ メタデータ確認（5分）

7. **ファイル情報**
   - [ ] ファイル名が正しく表示される
   - [ ] ファイルサイズが表示される
   - [ ] アップロード日時が表示される
   - [ ] アップロード者が表示される

8. **フォルダ情報**
   - [ ] フォルダ名が正しく表示される
   - [ ] 作成日時が表示される
   - [ ] 作成者が表示される
   - [ ] ファイル数が正しい

## よくある問題と即座の解決方法

### 問題: ドキュメントが表示されない

**即座の確認:**
```javascript
// ブラウザコンソールで実行
console.log(window.contractDocManager);
```

**データベース確認:**
```sql
SELECT COUNT(*) FROM document_folders WHERE facility_id = [ID] AND category = 'contracts';
SELECT COUNT(*) FROM document_files WHERE facility_id = [ID] AND category = 'contracts';
```

### 問題: ダウンロードが失敗する

**即座の確認:**
- ブラウザの開発者ツール → ネットワークタブ → ダウンロードリクエストのステータスコードを確認
- 404エラー: ファイルパスが正しくない
- 403エラー: 権限がない
- 500エラー: サーバーエラー

### 問題: フォルダ階層が正しくない

**即座の確認:**
```sql
SELECT id, name, parent_id, path FROM document_folders 
WHERE facility_id = [ID] AND category = 'contracts' 
ORDER BY path;
```

## テスト実行記録（簡易版）

| テスト項目 | 結果 | 備考 |
|-----------|------|------|
| 統一セクション表示 | ✅ / ❌ | |
| セクション展開 | ✅ / ❌ | |
| フォルダ表示 | ✅ / ❌ | |
| ファイル表示 | ✅ / ❌ | |
| ファイルダウンロード | ✅ / ❌ | |
| フォルダ操作 | ✅ / ❌ | |
| ファイル削除 | ✅ / ❌ | |
| フォルダ削除 | ✅ / ❌ | |
| メタデータ表示 | ✅ / ❌ | |

## 合格基準

すべての項目が ✅ であること。

## 詳細テストガイド

より詳細なテスト手順、トラブルシューティング、技術的な詳細については、以下のドキュメントを参照してください:

- [契約書ドキュメント互換性テストガイド（詳細版）](contract-document-compatibility-testing-guide.md)

## 次のステップ

テストが完了したら:

1. ✅ すべての項目が合格 → タスク9「統合テストの実装」に進む
2. ❌ 問題が発見された → 詳細テストガイドのトラブルシューティングセクションを参照
