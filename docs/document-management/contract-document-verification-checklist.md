# 契約書ドキュメント管理機能 動作確認チェックリスト

## 概要
このドキュメントは、契約書ドキュメント管理機能の動作確認手順を記載しています。

## 前提条件
- ローカル開発環境が起動していること
- テスト用の施設データが存在すること
- 編集権限を持つユーザーでログインしていること

## 1. 基本表示の確認

### 1.1 契約書タブの表示
- [ ] 施設詳細画面で「契約書」タブが表示される
- [ ] 「給食」「駐車場」「その他」のサブタブが表示される
- [ ] 各サブタブに「関連ドキュメント」セクションが表示される

### 1.2 ドキュメント管理セクションの表示
- [ ] 「ドキュメントを表示」ボタンをクリックすると、ドキュメント管理UIが展開される
- [ ] ツールバー（フォルダ作成、ファイルアップロード、検索）が表示される
- [ ] パンくずナビゲーションが表示される
- [ ] 表示モード切替（リスト/グリッド）が表示される

### 1.3 空の状態の表示
- [ ] ドキュメントが存在しない場合、空の状態メッセージが表示される
- [ ] 「ファイルをアップロード」ボタンが表示される

## 2. フォルダ操作の確認

### 2.1 フォルダ作成
- [ ] 「新しいフォルダ」ボタンをクリックすると、フォルダ作成モーダルが表示される
- [ ] フォルダ名を入力して「作成」ボタンをクリックすると、フォルダが作成される
- [ ] 作成されたフォルダがリストに表示される
- [ ] 成功メッセージが表示される

### 2.2 フォルダを開く
- [ ] フォルダ名をクリックすると、フォルダ内に移動する
- [ ] パンくずリストが更新される
- [ ] フォルダ内のファイルとサブフォルダが表示される

### 2.3 フォルダ名変更
- [ ] フォルダの「...」ボタンをクリックすると、コンテキストメニューが表示される
- [ ] 「名前変更」を選択すると、名前変更モーダルが表示される
- [ ] 新しい名前を入力して「変更」ボタンをクリックすると、フォルダ名が変更される
- [ ] 変更後のフォルダ名がリストに反映される

### 2.4 フォルダ削除
- [ ] フォルダの「...」ボタンから「削除」を選択すると、確認ダイアログが表示される
- [ ] 「OK」をクリックすると、フォルダが削除される
- [ ] フォルダがリストから消える
- [ ] フォルダ内のファイルも削除される

## 3. ファイル操作の確認

### 3.1 ファイルアップロード
- [ ] 「ファイルアップロード」ボタンをクリックすると、アップロードモーダルが表示される
- [ ] ファイルを選択して「アップロード」ボタンをクリックすると、ファイルがアップロードされる
- [ ] アップロード中、進行状況が表示される
- [ ] アップロード完了後、ファイルがリストに表示される
- [ ] 成功メッセージが表示される

### 3.2 ファイルダウンロード
- [ ] ファイル名をクリックすると、ファイルがダウンロードされる
- [ ] ダウンロードされたファイルが正しく開ける
- [ ] 元のファイル名でダウンロードされる

### 3.3 ファイル名変更
- [ ] ファイルの「...」ボタンをクリックすると、コンテキストメニューが表示される
- [ ] 「名前変更」を選択すると、名前変更モーダルが表示される
- [ ] 新しい名前を入力して「変更」ボタンをクリックすると、ファイル名が変更される
- [ ] 変更後のファイル名がリストに反映される

### 3.4 ファイル削除
- [ ] ファイルの「...」ボタンから「削除」を選択すると、確認ダイアログが表示される
- [ ] 「OK」をクリックすると、ファイルが削除される
- [ ] ファイルがリストから消える

### 3.5 ファイルプロパティ表示
- [ ] ファイルの「...」ボタンから「プロパティ」を選択すると、プロパティモーダルが表示される
- [ ] ファイル名、サイズ、更新日時、作成者が表示される

## 4. 検索機能の確認

### 4.1 ファイル検索
- [ ] 検索ボックスにキーワードを入力して検索ボタンをクリックすると、検索結果が表示される
- [ ] ファイル名に部分一致するファイルが表示される
- [ ] フォルダ名に部分一致するフォルダが表示される

### 4.2 検索結果のクリア
- [ ] 検索ボックスを空にして検索すると、元のフォルダ表示に戻る
- [ ] パンくずリストが元に戻る

## 5. 表示モードの確認

### 5.1 リスト表示
- [ ] リスト表示ラジオボタンを選択すると、テーブル形式で表示される
- [ ] フォルダとファイルが行として表示される
- [ ] アイコン、名前、サイズ、更新日時、作成者が表示される

### 5.2 グリッド表示
- [ ] グリッド表示ラジオボタンを選択すると、カード形式で表示される
- [ ] フォルダとファイルがカードとして表示される
- [ ] アイコン、名前、更新日時が表示される

## 6. パンくずナビゲーションの確認

### 6.1 パンくずリストの表示
- [ ] ルートフォルダでは「ルート」のみが表示される
- [ ] サブフォルダに移動すると、パスが表示される
- [ ] 各階層がリンクとして表示される

### 6.2 パンくずリストのナビゲーション
- [ ] パンくずリストのリンクをクリックすると、その階層に移動する
- [ ] ドキュメントリストが更新される

## 7. カテゴリ分離の確認

### 7.1 給食契約書カテゴリ
- [ ] 給食タブのドキュメント管理で作成したフォルダ/ファイルが、給食カテゴリに保存される
- [ ] 他のカテゴリ（駐車場、その他）のドキュメントと混在しない

### 7.2 駐車場契約書カテゴリ
- [ ] 駐車場タブのドキュメント管理で作成したフォルダ/ファイルが、駐車場カテゴリに保存される
- [ ] 他のカテゴリ（給食、その他）のドキュメントと混在しない

### 7.3 その他契約書カテゴリ
- [ ] その他タブのドキュメント管理で作成したフォルダ/ファイルが、その他カテゴリに保存される
- [ ] 他のカテゴリ（給食、駐車場）のドキュメントと混在しない

### 7.4 他のドキュメント管理との分離
- [ ] 契約書ドキュメントが、修繕履歴ドキュメントと混在しない
- [ ] 契約書ドキュメントが、ライフライン設備ドキュメントと混在しない

## 8. 権限制御の確認

### 8.1 編集権限あり
- [ ] フォルダ作成ボタンが表示される
- [ ] ファイルアップロードボタンが表示される
- [ ] コンテキストメニューで編集・削除が可能

### 8.2 閲覧権限のみ
- [ ] フォルダ作成ボタンが表示されない
- [ ] ファイルアップロードボタンが表示されない
- [ ] ファイルのダウンロードのみ可能
- [ ] コンテキストメニューで編集・削除ができない

## 9. エラーハンドリングの確認

### 9.1 バリデーションエラー
- [ ] フォルダ名が空の場合、エラーメッセージが表示される
- [ ] ファイルが選択されていない場合、エラーメッセージが表示される
- [ ] ファイルサイズが大きすぎる場合、エラーメッセージが表示される

### 9.2 ネットワークエラー
- [ ] API通信エラー時、適切なエラーメッセージが表示される
- [ ] ローディング表示が適切に終了する

### 9.3 権限エラー
- [ ] 権限がない操作を実行した場合、403エラーメッセージが表示される

## 10. モーダルの動作確認

### 10.1 モーダルの表示
- [ ] フォルダ作成モーダルが正しく表示される
- [ ] ファイルアップロードモーダルが正しく表示される
- [ ] 名前変更モーダルが正しく表示される
- [ ] プロパティモーダルが正しく表示される

### 10.2 モーダルの操作
- [ ] モーダルの背景をクリックしても閉じない（static backdrop）
- [ ] ESCキーでモーダルが閉じる
- [ ] 「閉じる」ボタンでモーダルが閉じる
- [ ] フォーム送信後、モーダルが自動的に閉じる

### 10.3 モーダルのz-index
- [ ] 折りたたみ領域内でモーダルを開いても、正しく前面に表示される
- [ ] モーダル背景（backdrop）が正しく表示される
- [ ] 複数のモーダルを開いても、z-indexが正しく設定される

## 11. ブラウザ互換性の確認

### 11.1 Chrome
- [ ] すべての機能が正常に動作する
- [ ] UIが正しく表示される

### 11.2 Firefox
- [ ] すべての機能が正常に動作する
- [ ] UIが正しく表示される

### 11.3 Safari
- [ ] すべての機能が正常に動作する
- [ ] UIが正しく表示される

### 11.4 Edge
- [ ] すべての機能が正常に動作する
- [ ] UIが正しく表示される

## 12. レスポンシブデザインの確認

### 12.1 デスクトップ（1920x1080）
- [ ] レイアウトが正しく表示される
- [ ] すべての要素が適切に配置される

### 12.2 タブレット（768x1024）
- [ ] レイアウトが適切に調整される
- [ ] タッチ操作が可能

### 12.3 モバイル（375x667）
- [ ] レイアウトがモバイル向けに最適化される
- [ ] タッチ操作が可能
- [ ] スクロールが正常に動作する

## 13. パフォーマンスの確認

### 13.1 初期読み込み
- [ ] ドキュメント一覧の初期読み込みが3秒以内に完了する
- [ ] ローディング表示が適切に表示される

### 13.2 ファイルアップロード
- [ ] 10MBのファイルアップロードが30秒以内に完了する
- [ ] 進行状況が適切に表示される

### 13.3 検索
- [ ] 検索結果が2秒以内に表示される

## 14. ブラウザコンソールの確認

### 14.1 JavaScriptエラー
- [ ] ブラウザコンソールにJavaScriptエラーが表示されない
- [ ] 警告メッセージが最小限である

### 14.2 ネットワークタブ
- [ ] API通信が正常に行われている
- [ ] HTTPステータスコードが適切（200, 201, 204など）
- [ ] レスポンスタイムが適切（1秒以内）

### 14.3 コンソールログ
- [ ] デバッグログが適切に出力されている
- [ ] エラーログが適切に出力されている

## 15. アクセシビリティの確認

### 15.1 キーボード操作
- [ ] Tabキーでフォーカス移動が可能
- [ ] Enterキーでボタンが押せる
- [ ] ESCキーでモーダルが閉じる

### 15.2 スクリーンリーダー
- [ ] aria-label属性が適切に設定されている
- [ ] aria-hidden属性が適切に設定されている
- [ ] フォーカス可能な要素に適切なラベルがある

## 検証結果

### 実施日
- 日付: _______________
- 実施者: _______________

### 総合評価
- [ ] すべての項目が正常に動作する
- [ ] 一部の項目に問題がある（詳細を記載）
- [ ] 重大な問題がある（詳細を記載）

### 問題点・改善点
```
（ここに問題点や改善点を記載）
```

### 備考
```
（その他の備考を記載）
```
