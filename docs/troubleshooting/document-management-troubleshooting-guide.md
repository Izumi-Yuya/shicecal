# ドキュメント管理機能 トラブルシューティングガイド

## 概要

このガイドは、ドキュメント管理機能で発生する可能性のある問題と、その解決方法を詳しく説明します。

## 一般的な問題と解決方法

### 1. ファイルアップロード関連の問題

#### 1.1 ファイルアップロードが失敗する

**症状:**
- アップロードボタンをクリックしても反応しない
- アップロード中にエラーが発生する
- 進行状況が途中で止まる

**考えられる原因と対処法:**

##### 原因1: ファイルサイズ制限超過
```
エラーメッセージ: "ファイルサイズが制限を超えています（最大10MB）"
```
**対処法:**
- ファイルサイズを確認（10MB以下にする）
- PDFの場合は圧縮ツールを使用
- 画像の場合は解像度を下げる

##### 原因2: 対応していないファイル形式
```
エラーメッセージ: "対応していないファイル形式です"
```
**対処法:**
- 対応形式を確認: PDF, DOC, DOCX, XLS, XLSX, JPG, PNG, GIF, TXT, CSV
- ファイルを対応形式に変換
- ファイル拡張子が正しいか確認

##### 原因3: ネットワーク接続の問題
```
エラーメッセージ: "ネットワークエラーが発生しました"
```
**対処法:**
- インターネット接続を確認
- Wi-Fi接続を再接続
- 有線接続に切り替え
- しばらく時間をおいて再試行

##### 原因4: サーバー容量不足
```
エラーメッセージ: "ストレージ容量が不足しています"
```
**対処法:**
- システム管理者に連絡
- 不要なファイルを削除
- 古いファイルをアーカイブ

#### 1.2 ドラッグ&ドロップが機能しない

**症状:**
- ファイルをドラッグしても反応しない
- ドロップエリアが表示されない

**対処法:**
1. ブラウザを更新（F5キー）
2. JavaScriptが有効になっているか確認
3. 別のブラウザで試行
4. ファイル選択ボタンを使用

### 2. フォルダ操作関連の問題

#### 2.1 フォルダが作成できない

**症状:**
- 「新しいフォルダ」ボタンが無効
- フォルダ作成ダイアログが表示されない
- 作成ボタンをクリックしてもエラーになる

**考えられる原因と対処法:**

##### 原因1: 権限不足
```
エラーメッセージ: "この施設のフォルダを作成する権限がありません"
```
**対処法:**
- 施設の編集権限があるか確認
- システム管理者に権限確認を依頼

##### 原因2: フォルダ名の問題
```
エラーメッセージ: "同名のフォルダが既に存在します"
```
**対処法:**
- 異なるフォルダ名を使用
- 既存フォルダ名を確認

```
エラーメッセージ: "使用できない文字が含まれています"
```
**対処法:**
- 使用禁止文字を削除: `/ \ : * ? " < > |`
- 日本語・英数字・ハイフン・アンダースコアのみ使用

##### 原因3: フォルダ名の長さ制限
```
エラーメッセージ: "フォルダ名は255文字以内で入力してください"
```
**対処法:**
- フォルダ名を短縮
- 略語や番号を使用

#### 2.2 フォルダが削除できない

**症状:**
- 削除ボタンが無効
- 削除確認ダイアログが表示されない

**考えられる原因と対処法:**

##### 原因1: 権限不足
**対処法:**
- 施設の編集権限があるか確認
- システム管理者に権限確認を依頼

##### 原因2: フォルダ内にファイルが存在
**対処法:**
- フォルダ内のファイルを先に削除
- または、フォルダごと削除することを確認

### 3. ファイル表示・ダウンロード関連の問題

#### 3.1 ファイルがダウンロードできない

**症状:**
- ダウンロードリンクをクリックしても反応しない
- ダウンロードが開始されない
- エラーページが表示される

**考えられる原因と対処法:**

##### 原因1: ファイルが存在しない
```
エラーメッセージ: "ファイルが見つかりません"
```
**対処法:**
- ファイルが削除されていないか確認
- ページを更新して再確認
- システム管理者に確認を依頼

##### 原因2: 権限不足
```
エラーメッセージ: "このファイルにアクセスする権限がありません"
```
**対処法:**
- 施設の閲覧権限があるか確認
- システム管理者に権限確認を依頼

##### 原因3: ブラウザの設定問題
**対処法:**
- ポップアップブロックを無効にする
- ダウンロード設定を確認
- 別のブラウザで試行

#### 3.2 ファイルプレビューが表示されない

**症状:**
- プレビューウィンドウが空白
- 「プレビューできません」と表示される

**対処法:**
1. 対応形式を確認（PDF、画像のみ）
2. ファイルが破損していないか確認
3. ブラウザのPDFビューアー設定を確認
4. Adobe Acrobat Readerをインストール

### 4. 表示・ナビゲーション関連の問題

#### 4.1 フォルダ・ファイル一覧が表示されない

**症状:**
- 一覧エリアが空白
- 読み込み中のまま変わらない

**対処法:**
1. ページを更新（F5キー）
2. ブラウザのキャッシュをクリア
3. JavaScriptが有効になっているか確認
4. ネットワーク接続を確認

#### 4.2 パンくずナビゲーションが機能しない

**症状:**
- パンくずをクリックしても移動しない
- パンくずが表示されない

**対処法:**
1. ページを更新
2. ルートフォルダから再度移動
3. ブラウザを再起動

#### 4.3 ソート機能が動作しない

**症状:**
- ソートボタンをクリックしても順序が変わらない
- ソートボタンが無効

**対処法:**
1. ページを更新
2. 表示モードを切り替えてから再試行
3. ブラウザのJavaScriptを確認

### 5. パフォーマンス関連の問題

#### 5.1 動作が重い・遅い

**症状:**
- ページの読み込みが遅い
- ファイルアップロードに時間がかかる
- フォルダ移動が遅い

**対処法:**

##### 短期的対処法:
1. ブラウザのキャッシュをクリア
2. 不要なブラウザタブを閉じる
3. 他のアプリケーションを終了
4. ネットワーク接続を確認

##### 長期的対処法:
1. フォルダ構造を整理（1フォルダあたり100ファイル以下）
2. 不要なファイルを定期的に削除
3. 大きなファイルは圧縮してからアップロード

#### 5.2 メモリ不足エラー

**症状:**
- ブラウザがクラッシュする
- 「メモリ不足」エラーが表示される

**対処法:**
1. ブラウザを再起動
2. 他のタブ・アプリケーションを閉じる
3. 一度に処理するファイル数を減らす
4. PCを再起動

### 6. ブラウザ別の問題

#### 6.1 Internet Explorer での問題

**症状:**
- 機能が正常に動作しない
- 表示が崩れる

**対処法:**
- Microsoft Edge、Chrome、Firefox等のモダンブラウザを使用
- Internet Explorerは非推奨

#### 6.2 Safari での問題

**症状:**
- ファイルアップロードが機能しない
- 表示が正しくない

**対処法:**
1. Safariを最新版にアップデート
2. JavaScriptを有効にする
3. ポップアップブロックを無効にする
4. 他のブラウザで試行

### 7. モバイル端末での問題

#### 7.1 スマートフォン・タブレットでの操作問題

**症状:**
- タッチ操作が反応しない
- 表示が小さすぎる
- ファイル選択ができない

**対処法:**
1. ブラウザを最新版にアップデート
2. 画面を横向きにする
3. ズーム機能を使用
4. デスクトップ版での操作を推奨

## エラーコード一覧

| エラーコード | 意味 | 対処法 |
|---|---|---|
| DOC_001 | ファイルサイズ超過 | ファイルサイズを10MB以下にする |
| DOC_002 | 非対応ファイル形式 | 対応形式に変換 |
| DOC_003 | 権限不足 | 管理者に権限確認を依頼 |
| DOC_004 | フォルダ名重複 | 異なる名前を使用 |
| DOC_005 | ファイル不存在 | ファイルの存在を確認 |
| DOC_006 | ストレージ容量不足 | 管理者に連絡 |
| DOC_007 | ネットワークエラー | 接続を確認して再試行 |
| DOC_008 | サーバーエラー | 管理者に連絡 |

## 診断手順

### 問題発生時の確認手順

1. **基本確認**
   - ブラウザの種類とバージョン
   - インターネット接続状況
   - エラーメッセージの内容

2. **権限確認**
   - ログイン状態
   - 施設へのアクセス権限
   - 操作権限（閲覧/編集）

3. **ファイル・フォルダ確認**
   - ファイルサイズと形式
   - フォルダ名の文字制限
   - 既存の同名ファイル・フォルダ

4. **環境確認**
   - JavaScript有効/無効
   - ポップアップブロック設定
   - ブラウザキャッシュ状況

### ログ確認方法（管理者向け）

#### ブラウザコンソールでのエラー確認
1. F12キーを押してデベロッパーツールを開く
2. 「Console」タブを選択
3. エラーメッセージを確認
4. エラー内容をシステム管理者に報告

#### ネットワークタブでの通信確認
1. デベロッパーツールの「Network」タブを選択
2. 問題の操作を再実行
3. 失敗したリクエストを確認
4. ステータスコードとレスポンスを確認

## 予防策

### 定期メンテナンス

#### ユーザー側
- 月1回のブラウザキャッシュクリア
- 不要ファイルの定期削除
- フォルダ構造の整理

#### システム側
- 定期的なバックアップ確認
- ストレージ容量監視
- パフォーマンス監視

### ベストプラクティス

1. **ファイル管理**
   - 分かりやすいファイル名を使用
   - 適切なフォルダ分類
   - 定期的な整理

2. **セキュリティ**
   - 機密ファイルの適切な管理
   - 不要なファイルの削除
   - アクセス権限の定期確認

3. **パフォーマンス**
   - 大きなファイルの圧縮
   - フォルダ内ファイル数の制限
   - 定期的な不要ファイル削除

## サポート連絡先

### 緊急時の連絡先
- システム管理者: [連絡先情報]
- 技術サポート: [連絡先情報]

### 報告時に必要な情報
1. 発生日時
2. 操作内容
3. エラーメッセージ
4. ブラウザ情報
5. ファイル情報（該当する場合）
6. スクリーンショット

---

**最終更新日**: 2024年12月
**バージョン**: 1.0