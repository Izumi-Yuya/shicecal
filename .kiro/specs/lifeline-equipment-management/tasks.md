# 実装計画

- [x] 1. ライフライン設備管理の基本構造を作成
  - 施設詳細画面にライフライン設備タブを追加
  - 5つのサブタブ（電気、ガス、水道、エレベーター、空調・照明）のナビゲーション構造を実装
  - 基本的なタブ切り替え機能を実装
  - _要件: 1.1, 1.2, 4.1_

- [x] 2. ライフライン設備のデータベース構造を実装
  - lifeline_equipment テーブルのマイグレーションを作成
  - electrical_equipment テーブルのマイグレーションを作成
  - LifelineEquipment モデルを作成
  - ElectricalEquipment モデルを作成
  - モデル間のリレーションシップを定義
  - _要件: 1.9, 7.6_

- [x] 3. LifelineEquipmentControllerの実装
  - LifelineEquipmentControllerクラスを作成
  - 電気設備データ取得APIエンドポイントを実装
  - 電気設備データ更新APIエンドポイントを実装
  - 権限チェックとバリデーション機能を実装
  - _要件: 1.9, 7.6_

- [x] 4. LifelineEquipmentPolicyの実装
  - LifelineEquipmentPolicyクラスを作成
  - 表示権限チェック機能を実装
  - 編集権限チェック機能を実装
  - 承認権限チェック機能を実装
  - _要件: 1.9_

- [x] 5. 電気設備カテゴリの画面構造を作成
  - 電気設備パーシャルビューを既存UIパターンに合わせて作成
  - 電気タブ選択時の5つのカード表示エリアを作成（基本情報、PAS、キュービクル、非常用発電機、備考）
  - カード表示/非表示の切り替え機能を実装
  - レスポンシブデザインでカードレイアウトを実装
  - _要件: 1.3, 4.2, 7.1_

- [x] 6. 電気設備の基本情報カードを実装
  - 基本情報カードのフォーム要素を作成（電気契約会社、保安管理業者、電気保守点検実施日、点検実施報告書）
  - バリデーション機能を実装
  - データ保存・更新機能を実装
  - _要件: 7.1, 1.9_

- [x] 7. 電気設備のPASカードを実装
  - PASカードのフォーム要素を作成（有無プルダウン、詳細テキスト、更新年月日）
  - プルダウン選択に応じたテキスト入力の表示制御を実装
  - データ保存・更新機能を実装
  - _要件: 7.2, 1.9_

- [x] 8. 電気設備のキュービクルカードを実装
  - キュービクルカードのフォーム要素を作成（有無プルダウン、詳細テキスト）
  - 複数台設備の動的追加・削除機能を実装（設備番号、メーカー、年式、更新年月日）
  - データ保存・更新機能を実装
  - _要件: 7.3, 1.9_

- [x] 9. 電気設備の非常用発電機カードを実装
  - 非常用発電機カードのフォーム要素を作成（有無プルダウン、詳細テキスト）
  - 複数台設備の動的追加・削除機能を実装（設備番号、メーカー、年式、更新年月日）
  - データ保存・更新機能を実装
  - _要件: 7.4, 1.9_

- [x] 10. 電気設備の備考カードを実装
  - 備考カードのテキストエリアを作成
  - データ保存・更新機能を実装
  - _要件: 7.5, 1.9_

- [x] 11. 電気設備のバックエンドサービス層実装
  - LifelineEquipmentServiceクラスを作成
  - 電気設備データ取得ビジネスロジックを実装
  - 電気設備データ保存・更新ビジネスロジックを実装
  - バリデーションルールサービスを実装
  - _要件: 1.9, 7.1-7.5_

- [x] 12. 電気設備のJavaScript機能実装
  - ライフライン設備用JavaScriptモジュールを作成
  - タブ切り替え機能を実装
  - カード編集・保存機能を実装
  - エラーハンドリングとユーザーフィードバック機能を実装
  - _要件: 1.8, 1.9_

- [x] 13. 電気設備管理のテストを作成
  - ユニットテスト（モデル、バリデーション）を作成
  - フィーチャーテスト（API、権限）を作成
  - ブラウザテスト（UI操作、データ保存）を作成
  - _要件: 全要件のテスト_

- [x] 14. ガス設備カテゴリの基本構造実装
  - GasEquipmentモデルを作成
  - ガス設備用のデータベースマイグレーションを作成
  - ガス設備パーシャルビューを共通UIパターンに合わせて実装
  - ガス設備の基本カード構造を実装（詳細仕様は開発中）
  - _要件: 3.1-3.5_

- [x] 15. 水道設備カテゴリの基本構造実装
  - WaterEquipmentモデルを作成
  - 水道設備用のデータベースマイグレーションを作成
  - 水道設備パーシャルビューを共通UIパターンに合わせて実装
  - 水道設備の基本カード構造を実装（詳細仕様は開発中）
  - _要件: 3.1-3.5_

- [x] 16. エレベーター設備カテゴリの基本構造実装
  - ElevatorEquipmentモデルを作成
  - エレベーター設備用のデータベースマイグレーションを作成
  - エレベーター設備パーシャルビューを共通UIパターンに合わせて実装
  - エレベーター設備の基本カード構造を実装（詳細仕様は開発中）
  - _要件: 3.1-3.5_

- [x] 17. 空調・照明設備カテゴリの基本構造実装
  - HvacLightingEquipmentモデルを作成
  - 空調・照明設備用のデータベースマイグレーションを作成
  - 空調・照明設備パーシャルビューを共通UIパターンに合わせて実装
  - 空調・照明設備の基本カード構造を実装（詳細仕様は開発中）
  - _要件: 3.1-3.5_

- [x] 18. 全設備カテゴリのAPIエンドポイント統合
  - 各設備カテゴリのコントローラーメソッドを実装
  - 統一されたAPIレスポンス形式を実装
  - 設備カテゴリ間のデータ整合性チェックを実装
  - ルーティング設定を追加
  - _要件: 1.9, 4.1-4.9_

- [x] 19. ライフライン設備管理の包括的テスト実装
  - 全設備カテゴリのユニットテストを作成
  - 設備間連携のインテグレーションテストを作成
  - ブラウザテストで全タブ・全カードの動作確認を実装
  - パフォーマンステストとセキュリティテストを実装
  - _要件: 全要件のテスト_

- [x] 20. ライフライン設備管理の最終統合と調整
  - 既存の施設管理システムとの完全統合テストを実行
  - UIの一貫性とアクセシビリティの最終確認を実施
  - エラーハンドリングとユーザーエクスペリエンスの最適化を実施
  - ドキュメント更新と運用ガイドの作成を実施
  - _要件: 全要件の統合確認_